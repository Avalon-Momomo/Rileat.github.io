<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å°è±å¹²é¥­ï¼</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>ğŸ½ å°è±å¹²é¥­ ğŸ½</header>

  <main>
    <a class="nav-btn" href="add.html">â• æ·»åŠ èœè°±</a>
    <a class="nav-btn" href="index.html">ğŸ¡ è¿”å›é¦–é¡µ</a>

    <section class="section">
      <h2>ğŸ“‹ èœè°±åˆ—è¡¨</h2>
      <div id="menuContainer"></div>
    </section>
  </main>

  <script src="app.js"></script>
  <script>
    const dishes = JSON.parse(localStorage.getItem('dishes')) || [];
    const menuContainer = document.getElementById('menuContainer');

    function renderMenu() {
      menuContainer.innerHTML = '';
      const grouped = {};

      dishes.forEach(d => {
        if (!grouped[d.mealType]) grouped[d.mealType] = {};
        if (!grouped[d.mealType][d.dishType]) grouped[d.mealType][d.dishType] = [];
        grouped[d.mealType][d.dishType].push(d);
      });

      for (const meal in grouped) {
        const mealDiv = document.createElement('div');
        mealDiv.innerHTML = `<h3>ğŸ± ${meal}</h3>`;
        for (const type in grouped[meal]) {
          const typeDiv = document.createElement('div');
          typeDiv.innerHTML = `<strong>${type}ï¼š</strong>`;
          const dishList = document.createElement('div');
          dishList.className = 'dish-list';

          grouped[meal][type].forEach(dish => {
            const item = document.createElement('div');
            item.className = 'dish-item';
            item.innerHTML = `
              <img src="${dish.image}" alt="${dish.name}">
              <p><strong>${dish.name}</strong></p>
              <small>${dish.materials}</small>
              <button class="select-btn">ç‚¹èœ</button>
            `;
            item.querySelector('.select-btn').addEventListener('click', () => {
              item.classList.toggle('selected');
            });
            dishList.appendChild(item);
          });

          typeDiv.appendChild(dishList);
          mealDiv.appendChild(typeDiv);
        }
        menuContainer.appendChild(mealDiv);
      }
    }

    renderMenu();
  </script>
</body>
</html>
